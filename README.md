# onecover
Репозитарий для экспериментов с расчетом покрытия тестами в 1С

### Подход:
1. Используем HTTP-отладчик 1С
2. Поднимаем nginx-proxy в docker-контейнере (./proxy)
    * Настраиваем отслеживание перенаправление POST-запросов на порт 11550 на сервер 1С порт 1550
    * Настраиваем логирование всех POST-запросов на порт 11550
3. В парметрах запуска сервера 1С указываем -http
4. В параметрах отладки (в конфигураторе) указываем использование протокола HTTP, адрес сервера 1С, порт 1550
5. Поднимаем контейнер с прокси (docker-compose up -d)
6. Запускаем конфигуратор, запускаем отладку.
7. Включаем замер производительности, выполняем "тестовые" действия, выключаем замер

На логи прокси (proxy/log/nginx_access.log) натравливаем скрипт "ПокрытиеМодулей.os" (пока нужно поправить пути в разделе программы модуля).

Можно поиграться с тестовыми данными (конфигурация + лог) из каталога "./tests/fixtures", тогда пути править не надо.

Смотрим результат в "test-result".

### Проблемы:
1. Пока не удалось в логах увидеть результаты выполнения кода на сервере
2. Как автоматизировать включение/выключение замера производительности

### Дополнительно:
1. Получилась полезная заготовка для парсинга каталога выгрузки конфигурации "src/Классы/Конфигурация.os"
2. Есть процедура для получения кода из модулей (игнорирует пустые строки, коментарии и строки переноса текста)
